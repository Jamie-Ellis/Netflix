<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <title>Hello, world!</title>
    <script
      src="https://kit.fontawesome.com/76ee4c4f0f.js"
      crossorigin="anonymous"
    ></script>
   <link rel="stylesheet" href="style.css">
  </head>
  <body>
<div id="background" style="background-image: url(https://occ-0-360-358.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABQeNCAUeZfZK3XtuSKxpgd_g6qfbYJF7m_aXUSjxbkRylpe49hQilz1EoRh7CzE6Dtd7lGyDhbJubVN7cuCiwsXqTIjm.webp?r=726);  background-position: center center;">
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top netflix" style="display: flex; justify-content: space-between;">
        <a class="navbar-brand" href="#">
          <img
            src="http://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png"
            width="120"
            alt=""
          />
        </a>
        <button
          class="navbar-toggler m-18"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#"
                >Home </a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/tvshows.html">Tv Shows<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Movies</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Recently Added</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">My List</a>
            </li>
          </ul>
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
            "
          >
            <i class="fas fa-search"></i>
            <i class="fas fa-gift"></i>
            <img
              src="https://previews.123rf.com/images/fokaspokas/fokaspokas1803/fokaspokas180300300/96761102-black-bell-icon-white-icon-with-shadow-on-transparent-background.jpg"
              class="mr-3"
              width="22"
              height="22"
            />
            <div class="btn-group">
              <button
                type="button"
                class="btn btn-ghost dropdown-toggle"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <span
                  ><img
                    src="https://mir-s3-cdn-cf.behance.net/project_modules/disp/1bdc9a33850498.56ba69ac2ba5b.png"
                    height="38"
                    width="38"
                    alt=""
                /></span>
              </button>
              <div class="dropdown-menu dropdown-menu-right">
                <button class="dropdown-item" type="button">Enrico</button>
                <button class="dropdown-item" type="button">Jamie</button>
                <button class="dropdown-item" type="button">Silviu</button>
              </div>
            </div>
          </div>
        </div>
      </nav>
      
        <div class="container-fluid">
            <div class="row row-cols-1">
                <div class="col" style="display: flex; flex-direction: row; justify-content: flex-start; margin-left: 25px;">
                    <h1>The Lost <br> Pirate <br> Kingdom</h1>
                </div>
                <div class="col" style="display: flex; flex-direction: row; justify-content: flex-start; margin-left: 25px;">
                    <span><h6>#4 in Spain Today</h6></span>
                </div>
                <div class="col" style="display: flex; flex-direction: row; justify-content: flex-start; margin-left: 25px;">
                    <span style="word-wrap: break-word;
                    width: 320px;"><p>In their golden age, pirates didn't just rule the high seas with bloody, bawdy abandon â€” they ruled their own country.</p></span>
                </div>
                <div class="col" style="display: flex; flex-direction: row; justify-content: space-between; margin-left: 25px;">
                    <div style="justify-self: flex-start;">
                        <button style="background-color: antiquewhite; border: none; border-radius: 3px; width: 80px; height: 40px;">
                            <span style="display: inline;"><i class="fas fa-play"></i></span>
                            <span style="display: inline;">Play</span>
                        </button>
                        <button style="background-color: grey; border: none; border-radius: 3px; width: 150px; height: 40px;">
                            <span style="display: inline;"><i class="fas fa-play"></i></span>
                            <span style="display: inline;">More Info</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="movie-lists"class="container-fluid" style="margin: 20px 20px 20px;">
        <div class="row row-cols-1">
            <div class="col">
                <h6>Trending Now</h6>
            </div>
        </div>
        
        <div class="row row-cols-4">
            <div class="col">
            <a href="">
                <div class="card" style="border: none;">
                    <img style="border-radius: 4px; position: absolute;"src="https://occ-0-360-358.1.nflxso.net/dnm/api/v6/X194eJsgWBDE2aQbaNdmCXGUP-Y/AAAABVLuOhe_nQy5456v750ImC2pv5cft_LYLbX1YZ7UAQZfwb1NI4fRnPyZyj3HEbl5TDTlAJwt4e49u3IghYtIDeCHEOo.webp?r=c15" alt="...">
                </div>
            </a>
            </div>
            <div class="col">
                <div class="card" style="border: none;">
                    <img style="border-radius: 4px; position: absolute;"src="https://occ-0-360-358.1.nflxso.net/dnm/api/v6/X194eJsgWBDE2aQbaNdmCXGUP-Y/AAAABVLuOhe_nQy5456v750ImC2pv5cft_LYLbX1YZ7UAQZfwb1NI4fRnPyZyj3HEbl5TDTlAJwt4e49u3IghYtIDeCHEOo.webp?r=c15" alt="...">
                </div>
            </div>
            <div class="col">
                <div class="card" style="border: none;">
                    <img style="border-radius: 4px; position: absolute;"src="https://occ-0-360-358.1.nflxso.net/dnm/api/v6/X194eJsgWBDE2aQbaNdmCXGUP-Y/AAAABVLuOhe_nQy5456v750ImC2pv5cft_LYLbX1YZ7UAQZfwb1NI4fRnPyZyj3HEbl5TDTlAJwt4e49u3IghYtIDeCHEOo.webp?r=c15" alt="...">
                </div>
            </div>
            <div class="col">
                <div class="card" style="border: none;">
                    <img style="border-radius: 4px; position: absolute;"src="https://occ-0-360-358.1.nflxso.net/dnm/api/v6/X194eJsgWBDE2aQbaNdmCXGUP-Y/AAAABVLuOhe_nQy5456v750ImC2pv5cft_LYLbX1YZ7UAQZfwb1NI4fRnPyZyj3HEbl5TDTlAJwt4e49u3IghYtIDeCHEOo.webp?r=c15" alt="...">
                </div>
            </div>
        </div>
    </div>
   

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    -->
    <script>
        window.onload = async () => {
        console.log("page has been rendered");
        const moviesURL =
          "https://striveschool-api.herokuapp.com/api/movies/ ";
        let movieListsDiv = document.getElementById("movie-lists");

        // GET is the method used for RETRIEVING DATA
        // GET IT'S THE DEFAULT METHOD

        try {

        //   document.getElementById("loadingSpinner").classList.toggle("d-none");

          let response = await fetch(moviesURL, {
            method: "GET",
            headers: {
              "Authorization":
                "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MDUxZWVhODg5YzI2ZjAwMTU3ZjljMmEiLCJpYXQiOjE2MTU5ODIyNDksImV4cCI6MTYxNzE5MTg0OX0.HFuH-U8pyPW9Fu5gg67BWY948kRjZWErmLRedPQyZWE",
            },
          });
          console.log(response);
          let data = await response.json();
          console.log(data);

        //   document.getElementById("loadingSpinner").classList.toggle("d-none");
          if (data.length > 0) {
            // create list items and append them in the list
            let titleSection = document.createElement("div")
            titleSection.classList.add("row row-cols-1")
            titleSection.innerHTML = `
            <div class="col">
                <h6>${data.category}</h6>
            </div>
            </div>`
            movieListsDiv.appendChild(titleSection);
            data.forEach((movie) => {
              let movieDiv = document.createElement("div");
              movieDiv.classList.add("col")
              movieDiv.innerHTML = `
              <a href="./details.html?id=${movie._id}">
                <div class="card" style="border: none;">
                    <img style="border-radius: 4px; position: absolute;"src="${movie.imageURL}" alt="...">
                </div>
            </a>`;
              movieListsDiv.appendChild(movieDiv);
            });
          } else {
            movieListsDiv.innerHTML = `<h1>No Movies to display</h1>`;
          }
        } catch (error) {
          console.log(error);
        }
      };
    </script>
  </body>
</html>